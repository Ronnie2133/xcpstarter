{% extends 'layout.html' %}{% block content %}<h2>Batch Recipes</h2><div class='card'><form method='get' action='{{ url_for('batches_export_recipes_csv') }}' style='display:inline-block;margin-right:8px;'><button class='btn btn-outline' type='submit'>Export Recipes CSV</button></form><form method='get' action='{{ url_for('batches_export_ingredients_csv') }}' style='display:inline-block;margin-right:8px;'><button class='btn btn-outline' type='submit'>Export Ingredients CSV</button></form><form method='post' action='{{ url_for('batches_import_csv') }}' enctype='multipart/form-data' class='small' style='display:block;margin-top:8px;'><label><strong>Import (either or both):</strong></label><br><label>Recipes CSV</label> <input type='file' name='recipes' accept='.csv'><label>Ingredients CSV</label> <input type='file' name='ingredients' accept='.csv'><button class='btn' type='submit'>Import</button><p class='small'>Recipes CSV columns: <code>name,yield_qty,yield_unit,notes</code>.<br>Ingredients CSV columns: <code>batch_name,item_name,qty,unit</code>. Items & batches are auto-created if missing.</p></form></div><div class='card'><form method='post'><label>Name</label><input name='name' required><label>Yield Qty</label><input type='number' step='0.0001' name='yield_qty' required><label>Yield Unit (g, kg, oz, lb, ml, l)</label><input name='yield_unit' value='g' required><label>Notes</label><textarea name='notes'></textarea><button>Create</button></form></div><table><tr><th>Name</th><th>Yield</th><th>Total Cost</th><th></th></tr>{% for b in batches %}<tr><td>{{ b.name }}</td><td>{{ b.yield_qty }} {{ b.yield_unit }}</td><td>${{ '%.2f'|format(b.total_cost) }}</td><td><a class='btn btn-outline' href='{{ url_for('edit_batch', batch_id=b.id) }}'>Open</a></td></tr>{% else %}<tr><td colspan='4' class='small'>No batches yet.</td></tr>{% endfor %}</table>{% endblock %}