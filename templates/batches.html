{% extends "base.html" %}
{% block content %}
<h1>Batches</h1>

<!-- Create batch -->
<form method="post" class="card" style="margin-bottom:1rem;">
  <div>
    <label>Name</label>
    <input name="name" required>
  </div>
  <div>
    <label>Yield</label>
    <input name="yield_qty" type="number" step="any" required style="width:10rem">
    <select name="yield_unit">
      <option>g</option><option>kg</option><option>oz</option>
      <option>lb</option><option>ml</option><option>l</option>
    </select>
  </div>
  <div>
    <label>Notes</label>
    <input name="notes">
  </div>
  <button type="submit">Create</button>
</form>

<!-- Import CSV -->
<form action="{{ url_for('batches_import_csv') }}" method="post" enctype="multipart/form-data" class="card" style="margin-bottom:1rem;">
  <div>
    <label>Import Batches CSV</label>
    <input type="file" name="file" accept=".csv" required>
  </div>
  <button type="submit">Import</button>
  <a href="{{ url_for('batches_export_csv') }}" class="button">Export current</a>
</form>

<!-- List -->
<table class="table">
  <thead><tr><th>Name</th><th>Yield</th><th>Cost</th><th></th></tr></thead>
  <tbody>
  {% for b in batches %}
    <tr>
      <td>{{ b.name }}</td>
      <td>{{ b.yield_qty }} {{ b.yield_unit }}</td>
      <td>${{ '%.2f' % b.total_cost }}</td>
      <td><a href="{{ url_for('batch_detail', batch_id=b.id) }}">Open</a></td>
    </tr>
  {% endfor %}
  </tbody>
</table>
{% endblock %}
