{% extends 'layout.html' %}{% block content %}<h2>Edit Menu Item: {{ menu_item.name }}</h2><p>Price: ${{ '%.2f'|format(menu_item.price or 0) }}</p><div class='row'><div class='card'><h3>Add Inventory Component</h3><form method='post' action='{{ url_for('add_menu_ingredient', menu_id=menu_item.id) }}'><label>Inventory Item</label><select name='item_id'>{% for i in inventory %}<option value='{{ i.id }}'>{{ i.name }} ({{ i.unit }} @ ${{ '%.4f'|format(i.unit_cost) }})</option>{% endfor %}</select><label>Qty</label><input type='number' step='0.0001' name='qty' required><label>Unit</label><input name='unit' value='g' required><button>Add</button></form></div><div class='card'><h3>Add Batch Portion</h3><form method='post' action='{{ url_for('add_menu_batch_portion', menu_id=menu_item.id) }}'><label>Batch Recipe</label><select name='batch_id'>{% for b in batches %}<option value='{{ b.id }}'>{{ b.name }} (yield {{ b.yield_qty }} {{ b.yield_unit }}, cost ${{ '%.2f'|format(b.total_cost) }})</option>{% endfor %}</select><label>Portion Qty</label><input type='number' step='0.0001' name='portion_qty' required><label>Portion Unit</label><input name='portion_unit' value='g' required><button>Add</button></form></div></div><h3>Components</h3><table><tr><th>Type</th><th>Name</th><th>Qty</th><th>Unit</th><th>Ext. Cost</th><th></th></tr>{% for row in components %}<tr><td>{{ row.type }}</td><td>{{ row.name }}</td><td>{{ row.qty }}</td><td>{{ row.unit }}</td><td>${{ '%.2f'|format(row.ext_cost) }}</td><td><a class='btn btn-outline' href='{{ url_for('delete_component', kind=row.type, comp_id=row.id) }}'>Delete</a></td></tr>{% else %}<tr><td colspan='6' class='small'>No components yet.</td></tr>{% endfor %}</table><p><strong>Total Plate Cost:</strong> ${{ '%.2f'|format(total_cost) }}</p>{% endblock %}