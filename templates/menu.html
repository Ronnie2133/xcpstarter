{% extends 'layout.html' %}
{% block content %}
<h2>Menu</h2>
<h3>Create Menu Item</h3>
<form method="post">
  <input name="name" placeholder="Name" required>
  <input name="price" type="number" step="0.01" placeholder="Price" required>
  <input name="notes" placeholder="Notes">
  <button>Create</button>
</form>
<h3>Existing Menu Items</h3>
<table>
  <tr><th>Name</th><th>Cost</th><th>Price</th><th>Margin %</th><th></th></tr>
  {% for m in menu %}
    {% set price = m.price or 0 %}
    {% set cost = m.cost or 0 %}
    {% if price > 0 %}
      {% set margin_pct = ((price - cost) / price * 100) %}
    {% else %}
      {% set margin_pct = None %}
    {% endif %}
    <tr>
      <td>{{ m.name }}</td>
      <td>${{ '%.2f'|format(cost) }}</td>
      <td>${{ '%.2f'|format(price) }}</td>
      <td>
        {% if margin_pct is not none %}
          {{ '%.1f'|format(margin_pct) }}%
        {% else %}â€”{% endif %}
      </td>
      <td><a href="{{ url_for('menu_detail', menu_id=m.id) }}">Open</a></td>
    </tr>
  {% else %}
    <tr><td colspan="5">No menu items yet.</td></tr>
  {% endfor %}
</table>
{% endblock %}
