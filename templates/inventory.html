{% extends 'layout.html' %}{% block content %}
<h2>Inventory Items</h2>
<div>
  <form method="get" action="{{ url_for('inventory_export_csv') }}" style="display:inline-block;margin-right:8px;">
    <button type="submit">Export CSV</button>
  </form>
  <form method="post" action="{{ url_for('inventory_import_csv') }}" enctype="multipart/form-data" style="display:inline-block;">
    <input type="file" name="file" accept=".csv" required>
    <button type="submit">Import CSV</button>
  </form>
</div>
<div>
  <form method="post">
    <input name="name" placeholder="Name" required>
    <input name="unit" placeholder="Unit (g, kg, oz, lb, ml, l)" value="lb" required>
    <input name="unit_cost" type="number" step="0.0001" placeholder="Unit Cost" value="0" required>
    <button>Add</button>
  </form>
</div>
<table border="1" cellpadding="6" cellspacing="0">
  <tr><th>Name</th><th>Unit</th><th>Unit Cost</th><th>Actions</th></tr>
  {% for i in items %}
  <tr>
    <form method="post" action="{{ url_for('update_inventory', item_id=i.id) }}">
      <td><input name="name" value="{{ i.name }}" required></td>
      <td><input name="unit" value="{{ i.unit }}" required></td>
      <td><input type="number" step="0.0001" name="unit_cost" value="{{ '%.4f'|format(i.unit_cost) }}" required></td>
      <td>
        <button type="submit">Save</button>
        <a href="{{ url_for('delete_inventory', item_id=i.id) }}">Delete</a>
      </td>
    </form>
  </tr>
  {% else %}
  <tr><td colspan="4">No inventory yet.</td></tr>
  {% endfor %}
</table>
{% endblock %}